<!--frontend/index.html-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Danh sách sản phẩm</title>
    <script src="js/jquery-3.5.1.min.js"></script>
</head>
<body>
    <a href="create.html">Thêm mới sp</a>
    <h1>Danh sách sản phẩm</h1>
    <table border="1" cellspacing="0" cellpadding="8">
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Price</th>
            <th></th>
        </tr>

        <tbody>

        </tbody>
    </table>
    <script>
        $(document).ready(function () {
            // Sử dụng cơ chế ajax của jQuery để gọi API, ngoài ajax có thể sử dụng XHTMLRequest hoặc
            // Fetch API của Javascript thuần để gọi API
            var obj_ajax = {
                url: 'http://localhost/PHP0721E_HDT/Day24_RESFUL_API_And_JSON/Codes_demo/backend/api.php',
                method: 'GET',
                // type: 'application/json',
                data: {},
                success: function (data) {
                    // Chuyển kiểu dữ liệu JSON về kiểu dữ liệu mà Javascript có thể hiểu đc
                    // data = $.parseJSON(data);
                    // console.log(data);
                    $.each(data, function (key, product) {
                        // console.log(key);
                        console.log(product);
                        var tr_content = '<tr>\n' +
                            '                <td class="td-id">' + product.id + '</td>\n' +
                            '                <td class="td-name">' + product.name + '</td>\n' +
                            '                <td class="td-price">' + product.price + '</td>\n' +
                            '                <td>\n' +
                            '                    <a href="update.html">Sửa</a>\n' +
                            '                    <a href="#" id="delete-ajax" onclick="return confirm(\'Bạn muốn xóa?\')">Xóa</a>\n' +
                            '                </td>\n' +
                            '            </tr>';
                        // Gắn nội dung trên vào thẻ tbody
                        $('tbody').append(tr_content)
                    })
                }
            };
            $.ajax(obj_ajax);
        });
    </script>

</body>
</html>
